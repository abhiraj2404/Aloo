enum ShopRole {
    OWNER
    STAFF
}

model User {
    id        String   @id @default(cuid())
    email     String   @unique
    password  String
    name      String
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    // if the user is OWNER/STAFF
    shopMembership ShopUser?

    // if the user is CUSTOMER
    tableSessions TableSession[]
    orders        Order[]
}

model ShopUser {
    id        String   @id @default(cuid())
    userId    String   @unique
    shopId    String
    role      ShopRole
    joinedAt  DateTime @default(now())
    updatedAt DateTime @updatedAt

    user User @relation(fields: [userId], references: [id])
    shop Shop @relation(fields: [shopId], references: [id])

    @@index([shopId])
}
